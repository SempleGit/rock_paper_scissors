<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors</title>
        <link rel="stylesheet" href="assets/stylesheets/style.css">
    </head>

    <body>

<script>
    let playerScore = 0;
    let cpuScore = 0;
    let round = 0;
    let numberOfRounds = 5;
    let sect;
    let resultP; 

    function computerPlay() {
        let choice = ["rock", "paper", "scissors"];
        return choice[Math.floor(Math.random() * choice.length)];
    }

    function finishGame() {
        
        if (round >= numberOfRounds) {
            
            let winner = playerScore > cpuScore ? "You Win!" : cpuScore > playerScore ? "You Lose!" : "Draw";
            resultP.textContent = `Final Result: ${winner}\nPlayer: ${playerScore} CPU: ${cpuScore}`
            resetButtons();
        }

    }

    function resetButtons() {
        playerScore = 0;
        cpuScore = 0;
        round = 0;
        sect.innerHTML = '<button onclick=game() type="submit">Play Again</button>';
    }

    function playRound(playerSelection, computerSelection = computerPlay()) {
        let result
        round++;
        switch (playerSelection) {
            case "r":
                result = playRock(computerSelection);
                break;
            case "p":
                result = playPaper(computerSelection);
                break;
            case "s":
                result = playScissors(computerSelection);
                break;
        }
        resultP.textContent = result;
        finishGame();
    }

    function playRock(computerSelection) {
        switch (computerSelection) {
            case "rock":
                return "Draw!";
            case "paper":
                cpuScore++;
                return "You Lose! Paper beats Rock";
            case "scissors":
                playerScore++;
                return "You Win! Rock crushes Scissors";
        }
    }

    function playPaper(computerSelection) {
        switch (computerSelection) {
            case "rock":
                playerScore++;
                return "You Win! Paper beats Rock";
            case "paper":
                return "Draw!";
            case "scissors":
                cpuScore++;
                return "You Lose! Scissors cut Paper";
        }
    }

    function playScissors(computerSelection) {
        switch (computerSelection) {
            case "rock":
                cpuScore++;
                return "You Lose! Rock crushes Scissors";
            case "paper":
                playerScore++;
                return "You Win! Scissors cut Paper";
            case "scissors":
                return "Draw!";
        }
    }

    function game() {
        sect = document.querySelector('#gameButtons');
        resultP = document.querySelector('#results');
        
        resultP.textContent = 'Choose your weapon';
        sect.innerHTML = '<button id="rock" onclick=playRound(\'r\') type="submit">Rock</button>';
        sect.innerHTML += '<button id="paper" onclick=playRound(\'p\') type="submit">Paper</button>';
        sect.innerHTML += '<button id="scissors" onclick=playRound(\'s\') type="submit">Scissors</button>';
    }
 
</script>

    <h1>Rock Paper Scissors!</h1>
    <p id="results"></p>
    <section id="gameButtons">
        <button id="play" onclick=game() type="submit">Play Game</button>
    </section>
    </body>